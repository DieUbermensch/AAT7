\section{Filtered-x Least mean square}


\subsection{The general system}
\begin{frame}{Filtered-$x$ Least mean squares}{The General System}
	\begin{columns}
		\begin{column}{0.5\textwidth}		

		\begin{itemize}
		\item Feedforward
		\begin{itemize}
		\item Dependent on delay between actuator and source		
		\end{itemize}
		\item Combined with an error microphone for feedback
		\begin{itemize}
		\item Adapt to changes in environment
		\item Always behind in samples/time 		
		\begin{itemize}
		\item Efficient for periodic signals
		\item Inefficient for stochastic signal 
		\end{itemize}	
		\end{itemize}
		\item Assumptions:
		\begin{itemize}
		\item Stationary Cancellation path
		\item FIR filter
		\end{itemize}

		\end{itemize}

		
		\end{column}
		\begin{column}{0.5\textwidth}
		\resizebox{1.1\columnwidth}{!}{	
		\input{figures/Expansion.tex}
		}
		\end{column}
	\end{columns}
\end{frame}


\subsection{Optimization}
\begin{frame}{Filtered-$x$ Least mean squares}{A minimization problem}
	\begin{columns}
		\begin{column}{0.5\textwidth}		
			
			\begin{itemize}
				\item Feedforward
				\begin{itemize}
					\item Dependent on delay between actuator and source		
				\end{itemize}
				\item Combined with an error microphone for feedback
				\begin{itemize}
					\item Adapt to changes in environment
					\item Always behind in samples/time 		
					\begin{itemize}
						\item Efficient for periodic signals
						\item Inefficient for stochastic signal 
					\end{itemize}	
				\end{itemize}
				\item Assumptions:
				\begin{itemize}
					\item Stationary Cancellation path
					\item FIR filter
				\end{itemize}
				
			\end{itemize}
			
			
		\end{column}
		\begin{column}{0.5\textwidth}
			\resizebox{0.85\columnwidth}{!}{	
			\begin{tikzpicture}
			\begin{axis}[
			view={60}{30},
			ylabel = {Weight 1},
			xlabel = {Weight 2},
			zlabel = {Error},
			zticklabels={1,0.5,0},ztick={0,-0.5,-1},
			grid=major,
			]
			\addplot3[surf,shader=flat,
			samples=20,
			domain=-1:0,y domain=0:2*pi,
			z buffer=sort]
			({sqrt(1-x^2) * cos(deg(y))},
			{sqrt( 1-x^2 ) * sin(deg(y))},
			x);	
			\end{axis}
			\end{tikzpicture}
			}
		\end{column}
	\end{columns}
\end{frame}


\subsection{Feedforward system}
\begin{frame}{Filtered-x Least mean square}{Adaptive FXLMS Algorithm}

	\begin{columns}
		\begin{column}{0.5\textwidth}
		\begin{center}
		

		\begin{itemize}
		\item[] Starting point:
		\begin{itemize}
		\setlength{\itemindent}{4em}
		\item[Input] $x[n]$
		\item[Output]$y[n]$
		\item[Error] $e[n]$	
		\item[Filtered x] $f[n]$	
		\item[Cancellation Path] $c[n]$		
		\end{itemize}

		\item[] Error Source:
		\begin{itemize}
		\item[] $e[n]=y[n]+x[n]$
		\end{itemize}

		\item[] Determining the gradient
		\begin{itemize}
		\item[] $\Delta b[n]=\frac{\partial e^2[n]}{\partial b[n]}=2e[n] \cdot \frac{\partial s[n]}{\partial b[n]}$
		\end{itemize}

		\item[] Utilizing the Filtered-x
		\begin{itemize}
		\item[] $\frac{\partial s[n]}{\partial b[n]} = [b_j[n] * x[n]]* c[n]$
		\end{itemize}		
		
		\item[] LMS expression:
		\begin{itemize}
		\item[] $b_j[n+1]=b_j[n]-2\mu e[n] f[n-j]$	
		\end{itemize}
		
		\end{itemize}
		\end{center}	
		
		
		
		
		\end{column}
		\begin{column}{0.5\textwidth}
		\resizebox{1.1\columnwidth}{!}{	
		\input{figures/Expansion.tex}
		}
		\end{column}
	\end{columns}


\end{frame}

\section{Combined system}
\begin{frame}{Overview}{Combined System}	
	\begin{itemize}
		\item Input for control filter and CP
		\begin{itemize}
			\item $x[n]$
			\item $\hat{x}[n+P]$
		\end{itemize}
	\end{itemize}
	\begin{center}
		\resizebox{0.9\columnwidth}{!}{		
			\input{figures/Totalsystemoverview.tex}}
	\end{center}
\end{frame}


\subsection{Multirate}
\begin{frame}{Implementation Consideration}{Multirate}

	\begin{columns}
		\begin{column}{0.4\textwidth}
\begin{itemize}
\item Reduce to computation demands N-fold

\begin{itemize}
\item Lower prediction length
\item 12 kHz is a factor $2^4$ lower in computation cost 
\end{itemize}
\end{itemize}
		\end{column}
		\begin{column}{0.6\textwidth} 
		
		\begin{center}
\begin{table}[]
\centering
\begin{tabular}{|c|c|c|c|c|c|}
\hline
$fs$                                                          & 192 & 96 & 48 & 24 & 12 \\ \hline
\begin{tabular}[c]{@{}c@{}}Prediction\\ Length\end{tabular}   & 43  & 22 & 11 & 6  & 3  \\ \hline
\end{tabular}
\end{table}
		\resizebox{0.75\columnwidth}{!}{
\begin{tikzpicture}
\begin{axis}[
width=3in,
height=2in,
scale only axis,
unbounded coords=jump,
xmode=log,
xmin=10,
xmax=192000,
xminorticks=true,
xlabel={Frequency [$k$Hz]},
xmajorgrids,
xminorgrids,
ymin=-60,
ymax=10,
ylabel={Magnitude [dBS]},
ymajorgrids,
axis background/.style={fill=white},
]
\addplot[mark=none, blue,thick] coordinates {(24000,0) (48000,0) (96000,-60)};
\addplot[mark=none, red,thick] coordinates {(12000,0) (24000,0) (48000,-60)};
\addplot[mark=none, black,thick] coordinates {(6000,0) (12000,0) (24000,-60)};
\addplot[mark=none, green,thick] coordinates {(10,0) (6000,0) (12000,-60)};
\end{axis}
\end{tikzpicture}
}
		\end{center}	
		\end{column}
	\end{columns}
\end{frame}
